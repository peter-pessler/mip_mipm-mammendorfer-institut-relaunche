!function($,t,e,i){function n(t,e){jQuery.extend(this,{Obj:t,_name:c,_defaults:$.fn.lightboxed.defaults,options:jQuery.extend({},$.fn.lightboxed.defaults,e),uniq:"id"+(new Date).getTime(),lightbox:{},cache:{},index:!1,touch:{},phantoms:{left:!1,right:!1}}),this.init()}function s(t,e,i){var n;return function(){var s=this,o=arguments,h=function(){n=null,i||t.apply(s,o)},a=i&&!n;clearTimeout(n),n=setTimeout(h,e),a&&t.apply(s,o)}}function o(t){return{clientX:/touch/.test(t.type)?(t.originalEvent||t).changedTouches[0].clientX:t.clientX,clientY:/touch/.test(t.type)?(t.originalEvent||t).changedTouches[0].clientY:t.clientY,pageX:/touch/.test(t.type)?(t.originalEvent||t).changedTouches[0].pageX:t.pageX,pageY:/touch/.test(t.type)?(t.originalEvent||t).changedTouches[0].pageY:t.pageY,timestamp:Date.now()}}function h(e){(e=e||t.event).preventDefault&&e.preventDefault(),e.returnValue=!1}function a(t){var e;if({37:1,38:1,39:1,40:1}[t.keyCode])return h(t),!1}function r(){t.addEventListener&&t.addEventListener("DOMMouseScroll",h,!1),t.onwheel=h,t.onmousewheel=e.onmousewheel=h,t.ontouchmove=h,e.onkeydown=a}function l(){t.removeEventListener&&t.removeEventListener("DOMMouseScroll",h,!1),t.onmousewheel=e.onmousewheel=null,t.onwheel=null,t.ontouchmove=null,e.onkeydown=null}var c="Lightboxed",u="0.3",g="lightboxed--";$.extend(n.prototype,{init:function(){var t=this;this.CacheObj=jQuery(e).find("#"+g+"cache").length>0?jQuery(e).find("#"+g+"cache"):jQuery('<div id="'+g+'cache" />').appendTo("body"),this.cache.container=jQuery('<div id="'+this.uniq+'" />').appendTo(this.CacheObj),this.cache.content=jQuery('<div class="'+g+'cached_content" />').appendTo(this.cache.container),this.Obj.length>1&&(this.cache.thumbs=jQuery('<div class="'+g+'cached_thumbs" />').appendTo(this.cache.container)),this.Obj.each((function(){t.addToCache(this)})),this.lightbox.container=jQuery(e).find("#"+g+"container").length>0?jQuery(e).find("#"+g+"container"):jQuery('<div id="'+g+'container" />').addClass(this.options.lightboxCloseClass).appendTo("body"),this.lightbox.stage=this.lightbox.container.find("#"+g+"stage").length>0?this.lightbox.container.find("#"+g+"stage"):jQuery('<div id="'+g+'stage" />').appendTo(this.lightbox.container),this.lightbox.content=this.lightbox.stage.find("#"+g+"content").length>0?this.lightbox.stage.find("#"+g+"content"):jQuery('<div id="'+g+'content" />').appendTo(this.lightbox.stage),this.lightbox.thumbs=this.lightbox.container.find("#"+g+"thumbs").length>0?this.lightbox.container.find("#"+g+"thumbs"):jQuery('<div id="'+g+'thumbs" />').appendTo(this.lightbox.stage),this.lightbox.close=this.lightbox.container.find("#"+g+"bttn_close").length>0?this.lightbox.container.find("#"+g+"bttn_close"):jQuery('<div id="'+g+'bttn_close" />').appendTo(this.lightbox.container),this.lightbox.prev=this.lightbox.container.find("#"+g+"bttn_prev").length>0?this.lightbox.container.find("#"+g+"bttn_prev"):jQuery('<div id="'+g+'bttn_prev" />').appendTo(this.lightbox.container),this.lightbox.next=this.lightbox.container.find("#"+g+"bttn_next").length>0?this.lightbox.container.find("#"+g+"bttn_next"):jQuery('<div id="'+g+'bttn_next" />').appendTo(this.lightbox.container),this.registerEvents("init")},addToCache:function(t){if((jQuery(t).attr("data-link")||jQuery(t).attr("href")||jQuery(t).attr("data-src")||jQuery(t).attr("src")).match("jpg|gif|png|JPG|GIF|PNG|JPEG|jpeg|svg|SVG|tif|TIF|bmp|BMP"))var e=jQuery("<img />").attr("src",jQuery(t).attr("data-link")||jQuery(t).attr("href")||jQuery(t).attr("src")).attr("alt",jQuery(t).attr("alt")).attr("data-caption",jQuery(t).attr("data-caption"));else if((jQuery(t).attr("data-link")||jQuery(t).attr("href")).match("^#")&&jQuery(jQuery(t).attr("data-link")||jQuery(t).attr("href")).length>0)var e=jQuery(jQuery(t).attr("data-link")||jQuery(t).attr("href")).html();else var e=jQuery("<iframe />").attr("src",jQuery(t).attr("data-link")||jQuery(t).attr("href")).attr("width",jQuery(t).attr("data-width")).attr("height",jQuery(t).attr("data-height")).attr("allowfullscreen","true");jQuery('<div class="'+g+'frame" />').append(e).append(jQuery(t).attr("data-caption")!==i?jQuery('<div class="'+g+'caption" />').html(jQuery(t).attr("data-caption")):"").appendTo(this.cache.content),this.Obj.length>1&&jQuery('<div class="'+g+'thumb" />').append(jQuery('<div class="'+g+'thumb_border" />').append(jQuery("<img />").attr("src",jQuery(t).attr("data-src")||jQuery(t).attr("src")||jQuery(t).attr("data-link")||jQuery(t).attr("href")))).appendTo(this.cache.thumbs)},resizeContent:function(){var e=this;this.lightbox.content.width(jQuery(t).width()*this.lightbox.content.children().length).height(this.cache.thumbs?jQuery(t).height()-this.lightbox.thumbs.height():jQuery(t).height()).children().width(jQuery(t).width()-2*this.options.content.spacing).height(this.lightbox.content.height()),this.lightbox.content.children().each((function(i){jQuery(this).css("left",jQuery(t).width()*i+e.options.content.spacing)}))},open:function(t,e){var i=this;this.cache.thumbs&&!1!==this.options.thumbs&&(this.lightbox.thumbs.width((this.options.thumbs.size+this.options.thumbs.spacing)*this.cache.thumbs.children().length).height(this.options.thumbs.size+2*this.options.thumbs.spacing).html(this.cache.thumbs.clone(!0).html()).show().children().width(this.options.thumbs.size).height(this.options.thumbs.size).css("margin",this.options.thumbs.spacing+"px "+this.options.thumbs.spacing/2+"px"),this.registerEvents("thumbs"),this.lightbox.next.show(),this.lightbox.prev.show()),this.lightbox.content.html(this.cache.content.clone(!0).html()),this.lightbox.content.children().length>1&&1==this.options.loop&&(this.phantoms={left:jQuery(this.lightbox.content.children().get(this.lightbox.content.children().length-1)).clone().addClass(g+"phantom-left").prependTo(this.lightbox.content),right:jQuery(this.lightbox.content.children().get(1)).clone().addClass(g+"phantom-right").appendTo(this.lightbox.content)}),this.resizeContent(),this.change(t,this.Obj.index(e)),this.registerEvents("lightbox"),this.lightbox.container.toggleClass(this.options.lightboxCloseClass+" "+this.options.lightboxOpenClass).fadeIn(this.options.delay),r()},close:function(t){var e=this;this.deregisterEvents(),this.lightbox.container.toggleClass(this.options.lightboxCloseClass+" "+this.options.lightboxOpenClass).fadeOut(this.options.delay,(function(){e.lightbox.container.attr("style",""),e.lightbox.content.html("").attr("style",""),e.lightbox.thumbs.html("").attr("style","").hide(),e.lightbox.next.hide(),e.lightbox.prev.hide(),e.index=!1,l()}))},change:function(e,i){var n=this,s="number"==typeof i?i:jQuery(i).index();if(this.lightbox.content.children().length>1){var o=!0===this.options.loop?jQuery(t).width()*-(s+1):jQuery(t).width()*-s;if(this.lightbox.content.css({"-webkit-transform":"translate("+o+"px,0)","-moz-transform":"translate("+o+"px,0)","-ms-transform":"translate("+o+"px,0)","-o-transform":"translate("+o+"px,0)",transform:"translate("+o+"px,0)",transition:this.options.delay+"ms transform"}),-1==s?(s=this.lightbox.content.children().length-3,setTimeout((function(){var e=jQuery(t).width()*-(s+1);n.lightbox.content.css({"-webkit-transform":"translate("+e+"px,0)","-moz-transform":"translate("+e+"px,0)","-ms-transform":"translate("+e+"px,0)","-o-transform":"translate("+e+"px,0)",transform:"translate("+e+"px,0)",transition:"none"})}),this.options.delay)):s==this.lightbox.content.children().length-2?(s=0,setTimeout((function(){var e=jQuery(t).width()*-(s+1);n.lightbox.content.css({"-webkit-transform":"translate("+e+"px,0)","-moz-transform":"translate("+e+"px,0)","-ms-transform":"translate("+e+"px,0)","-o-transform":"translate("+e+"px,0)",transform:"translate("+e+"px,0)",transition:"none"})}),this.options.delay)):setTimeout((function(){n.lightbox.content.css("transition","none")}),this.options.delay),this.lightbox.content.children().removeClass(g+"active"),jQuery(this.lightbox.content.children().get(s+1)).addClass(g+"active"),this.lightbox.thumbs.children().removeClass(g+"active"),jQuery(this.lightbox.thumbs.children().get(s)).addClass(g+"active"),this.lightbox.thumbs.width()>jQuery(t).width()){var o=-s*(this.options.thumbs.size+this.options.thumbs.spacing)-(this.options.thumbs.size+this.options.thumbs.spacing)/2;this.lightbox.thumbs.css({"-webkit-transform":"translate("+o+"px,0)","-moz-transform":"translate("+o+"px,0)","-ms-transform":"translate("+o+"px,0)","-o-transform":"translate("+o+"px,0)",transform:"translate("+o+"px,0)",transition:this.options.delay+"ms transform"})}}this.index=s},next:function(t){var e=this;this.change(t,this.index+1)},prev:function(t){var e=this;this.change(t,e.index-1)},startTouch:function(t,e){var i=this;t.preventDefault(),this.touch={start:o(t),target:{x:parseFloat(e.css("transform").split(",")[4]),y:parseFloat(e.css("transform").split(",")[5])}}},endTouch:function(e,i){var n=this;e.preventDefault();var s=o(e).clientX-this.touch.start.clientX,h=o(e).clientY-this.touch.start.clientY,a=o(e).pageX-this.touch.start.pageX,r=o(e).pageY-this.touch.start.pageY,l=o(e).timestamp-this.touch.start.timestamp;i==this.lightbox.content&&((s>0?s:-s)>jQuery(t).width()*this.options.swipe.horizontalOffset?s>0?this.prev(e):this.next(e):(this.lightbox.content.css({"-webkit-transform":"translate("+this.touch.target.x+"px,0)","-moz-transform":"translate("+this.touch.target.x+"px,0)","-ms-transform":"translate("+this.touch.target.x+"px,0)","-o-transform":"translate("+this.touch.target.x+"px,0)",transform:"translate("+this.touch.target.x+"px,0)",transition:this.options.delay+"ms transform"}),setTimeout((function(){n.lightbox.content.css("transition","none")}),this.options.delay)),(h>0?h:-h)>jQuery(t).height()*this.options.swipe.verticalOffset?this.close(e):(this.lightbox.container.css({"-webkit-transform":"translate(0,0) scale(1)","-moz-transform":"translate(0,0) scale(1)","-ms-transform":"translate(0,0) scale(1)","-o-transform":"translate(0,0) scale(1)",transform:"translate(0,0) scale(1)",opacity:"1",transition:this.options.delay+"ms all"}),setTimeout((function(){n.lightbox.container.attr("style","display: block;")}),this.options.delay)))},moveTouch:function(e,i){var n=this;e.preventDefault();var s=o(e).clientX-this.touch.start.clientX,h=o(e).clientY-this.touch.start.clientY,a=o(e).pageX-this.touch.start.pageX,r=o(e).pageY-this.touch.start.pageY,l=o(e).timestamp-this.touch.start.timestamp;if(i==this.lightbox.content&&(s>0?s:-s)>10){var c=this.touch.target.x+s;i.css({"-webkit-transform":"translate("+c+"px,0)","-moz-transform":"translate("+c+"px,0)","-ms-transform":"translate("+c+"px,0)","-o-transform":"translate("+c+"px,0)",transform:"translate("+c+"px,0)"})}if(i==this.lightbox.content&&(h>0?h:-h)>30){var u=0+h,g=(jQuery(t).height()-(h>0?h:-h))/jQuery(t).height();this.lightbox.container.css({"-webkit-transform":"translate(0,"+u+"px) scale("+g+")","-moz-transform":"translate(0,"+u+"px) scale("+g+")","-ms-transform":"translate(0,"+u+"px) scale("+g+")","-o-transform":"translate(0,"+u+"px) scale("+g+")",transform:"translate(0,"+u+"px) scale("+g+")",opacity:g})}},registerEvents:function(e){var i=this;"init"==e&&this.Obj.each((function(){jQuery(this).on("click",(function(t){t.preventDefault(),i.open.call(i,t,this)}))})),"lightbox"==e&&(this.lightbox.close.on("click",(function(t){i.close.call(i,t)})),this.lightbox.next.on("click",(function(t){i.next.call(i,t)})),this.lightbox.prev.on("click",(function(t){i.prev.call(i,t)})),jQuery(t).on("resize",(function(t){i.resizeContent.call(i,t)})),this.lightbox.content.on("touchstart",(function(t){i.startTouch.call(i,t,i.lightbox.content)})),this.lightbox.content.on("touchend",(function(t){i.endTouch.call(i,t,i.lightbox.content)})),this.lightbox.content.on("touchmove",(function(t){i.moveTouch.call(i,t,i.lightbox.content)}))),"thumbs"==e&&(this.lightbox.thumbs.children().on("click",(function(t){i.change.call(i,t,this)})),this.lightbox.thumbs.children().on("touchend",(function(t){i.change.call(i,t,this)})),this.lightbox.thumbs.on("touchstart",(function(t){i.startTouch.call(i,t,i.lightbox.thumbs)})),this.lightbox.thumbs.on("touchend",(function(t){i.endTouch.call(i,t,i.lightbox.thumbs)})),this.lightbox.thumbs.on("touchmove",(function(t){i.moveTouch.call(i,t,i.lightbox.thumbs)})))},deregisterEvents:function(){var e=this;this.lightbox.close.off(),this.lightbox.next.off(),this.lightbox.prev.off(),jQuery(t).off("resize"),this.lightbox.content.off(),this.lightbox.thumbs.children().off(),this.lightbox.thumbs.off()}}),$.fn.indexof=function(t){for(var e,i=0;i<jQuery(this).length;i++)jQuery(this).get(i)==t&&(e=i);return e},$.fn.lightboxed=function(t){var e=function(){$.data(this,"plugin_"+c)||$.data(this,"plugin_"+c,new n(jQuery(this),t))},i={};return jQuery(this).filter("[rel]").each((function(){var t=jQuery(this).attr("rel");i.hasOwnProperty(t)?i[t].push(this):i[t]=[this]})),jQuery.each(i,e),jQuery.each(jQuery(this).filter(":not([rel])"),e),this},$.fn.indexOf=function(t){var e=!1,i=jQuery(t)[0].outerHTML;return jQuery(this).each((function(t,n){if(jQuery(this)[0].outerHTML==i)return e=t,!1})),e},$.fn.lightboxed.defaults={lightboxOpenClass:g+"lightbox_open",lightboxCloseClass:g+"lightbox_close",delay:500,loop:!0,thumbs:{size:50,spacing:10},content:{spacing:10},swipe:{horizontalOffset:.2,verticalOffset:.33}}}(jQuery,window,document),jQuery(window).on("load",(function(){jQuery(".lightboxed").lightboxed()}));
//# sourceMappingURL=lightboxed.min.js.map